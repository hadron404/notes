# 重构：改善既有代码的设计

## Origin Code Version
* 设计得不好，明显不符合面向对象精神
* 单个类做了原本应该由其他类完成的事情；比如`Customer`类中的`statement()`
* 无法应对未来对系统的修改；比如以HTML格式输出详单

> Refactor Tips
> **Tip1 添加特性之前，考虑是否可以重构？**
> 如果你发现自己需要为程序添加一个特性，而代码结构使你无法很方便地达成目的，那就先重构那个程序，
> 使特性的添加比较容易进行，然后添加特性。
> 


## Refactored 0.1
> Refactor Tips
>  **Tip2 重构技术就是以微小的步伐修改程序**
### 01 Extract Method（110）
1. 找出代码的逻辑泥团并提炼到独立函数中
2. 通过已建立的测试机制检验刚才的重构
3. 修改独立函数中的函数名、参数名等
4. 重新编译测试
> 代码块越小，代码的功能就愈容易管理，代码的处理和移动也就越轻松
> 好的代码应该清楚表达出自己的功能，变量名称是代码清晰的关键
> **唯有写出人类容易理解的代码，才是优秀的程序员**
> 
### 02 Move Method（142）
1. 判断函数是否放错位置
2. 变更移动的新函数的名称、参数等
3. 测试
4. 找出程序中对旧函数的所有引用点，并修改它们，改用新函数
5. 测试
6. 根据情况，选择去掉旧函数或者保留旧函数

> 绝大多数情况下，函数应该放在它所使用的数据的所属对象内

### 03 Replace Temp with Query（120）
> 临时变量往往引发问题，它们会导致大量参数被传来传去，而其实完全没有这种必要
> 临时变量只在自己所属的函数中有效，所有它们会助长冗长而复杂的函数