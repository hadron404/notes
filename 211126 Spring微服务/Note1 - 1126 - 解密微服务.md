微服务

> 微服务最初起源于Alistair Cockburn 创造的[六边形架构](http：//alistair.cockburn.us/Hexagonal+architecture)的想法
>
> 微服务是一种架构风格或者是一种构建一套具备业务能力的IT系统的方法，这些业务能力包括自治、自包含和松耦合
>
> 蜂窝是微服务架构的一个理想的类别

微服务架构的原则

> 这些原则是设计和开发微服务时的“必需品”

1. 服务的单一职责，可参考 [SOLID设计模式](http：//wiki.c2.com/？PrinciplesOfO bjectOrientedDesign)
2. 微服务是自治的



DevOps

>DevOps在许多企业中大量采用和实践，主要是提高交付和敏捷速度
>
>采用DevOps需要文化的改变，程序的改变，也需要架构的改变
>
>DevOps主张敏捷开发，高速发布周期，自动测试，自动提供基础设施和自动部署

### 成功的微服务之间的共同特性

* 服务是一等公民
* 微服务是轻量级的
* 多语言架构的微服务
* 微服务环境中的自动化
* 支持位符的生态系统（DevOps处理、集中化日志管理、服务注册、API网关、大量监控、服务路由和流控制机制）
* 分布式和动态的微服务
* 反脆弱，快速故障，自我修复

[SOA原则](http：//serviceorientation.com/serviceori entation/index)定义的服务特性也适用于微服务

* 服务约定
* 松散耦合
* 服务抽象
* 服务重用
* 无状态
* 服务是可发现的
* 服务互通性
* 服务可组合性



微服务的主要优点

* 支持多语言架构
* 能够实验和创新
* 弹性和可扩展性
* 允许替换
* 支持构建有机系统
* 帮助减少技术债务
* 允许不同版本共存
* 支持自组织系统构建
* 支持事件驱动架构
* 允许DevOps



[ScaleCube](http：//theartofscalability.com/)定义的3个主要的应用扩展方法

1. 通过水平克隆应用来扩展x轴
2. 通过切分不同功能来扩展y轴
3. 通过分区或分片数据来扩展z轴





[十二因素](https://www.12factor.net/)

1. 一份基准代码
2. 捆绑依赖
3. 外部配置
4. 可寻址的后端服务
5. 构建、发布和运行之间的隔离
6. 无状态，无共享进程
7. 通过端口绑定暴露服务
8. 并发扩容
9. 易处理
10. 开发环境与线上环境等同
11. 外部化日志
12. 打包管理流程



适合选择微服务架构的场景

* 迁移单体应用
* 实用计算场景
* 构建自动化的无图形界面的业务应用或服务
* 可能有微型或大型应用程序负责单一功能，如简单的事件追踪应用
* 架构良好的MVC Web应用（后端即服务Baas场景）的后端服务按需加载数据
* 高度敏捷的应用程序，要求交付速度或上线事件的应用程序
* 可预知、会从微服务获益的应用程序，如多语言需求及需要命令和查询责任分离（CQRS)的应用程序

不适合选择微服务架构的场景

* 企业策略被迫使用集中管理的重量级组件（如ESB）来托管业务逻辑
* 企业文化与软件不符合，可参考[康威定律](http：//www.melconway.com/Home/Conways_Law.html)



微服务早期实践者

* Netflix
* Uber
* Airbnb
* Orbitz
* eBay
* Amazon
* Gilt
* Twitter
* Nike

这些公司实践微服务都是因为业务发展，导致初始的单体应用不符合业务需求场景，逐步拆分单体应用从而发展微服务，共同的主题都是**整体迁移**

>整体迁移是不聪明的，其实有寄回从一开始就构建微服务，更好过于构建一个大系统，并寻求机会去构建可以快速赢得业务的更小服务

> 总而言之，所有这些都不是真正的微服务，而是规模小、业务保持一致的服务，遵循相同的特征