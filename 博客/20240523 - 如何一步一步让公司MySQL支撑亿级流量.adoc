
== 第一阶段：MySQL 读写分离

大部分数据处理系统（TPS）都是读多写少，因此DB 如何支撑更高查询数则是性能优化的核心问题。

=== 基本思想
主服务器：主服务器是数据的源头，负责处理写操作（插入、更新、删除）。所有的数据变更都在主服务器上进行。
从服务器：从服务器接收主服务器的数据复制，用于处理读操作。从服务器通常用于分担主服务器的负载，提供数据的冗余和备份。

=== 实现挑战
. 如何保障主库与从库的数据一致性
. 主从分离模式下，对应用层（开发者）如何做到无感知（即仍然感受到为单一DB的体验）

=== 挑战1 解决方案：主从复制

==== 常见的主从方案

* 一主一从：一个主服务器，一个从服务器，此方案简单直观，适用于大多数场景。
* 一主多从：一个主服务器和多个从服务器的组合
* 级联复制：在主从结构中，设置一个从服务器作为其他从服务器的主服务器，形成级联结构
* 双主：两个主服务器，适用于高可用和负载均衡的需求。

==== 核心原理

===== MySQL的主从复制基本流程

. 主节点在数据变更时，会记录在 BinLog 中。
. 从节点会在一定时间间隔内对主节点的 BinLog 进行探测其是否发生改变，如果发生改变，则开始一个 I/O 线程请求 主节点的 二进制事件
. 主节点为每一个 I/O 线程启动一个 dump 线程，用于向 从节点发送二进制事件
. 从节点 会将收到的二进制事件保存至本地的中继日志 RelayLog 中
. 从节点 会启动 SQL 线程从中继日志 RelayLog 中读取二进制变更
. 从节点 的 SQL Thread 在本地重放中继日志，使得其数据和主节点的保持一致
.

===== MySQL 的主从复制模式

* 基于语句的复制（Statement-Based Replication，SBR）
* 基于行的复制（Row-Based Replication，RBR）
* 基于混合模式复制（Mixed-Based Replication，MBR）

====== MySQL 的主从复制策略
主从复制策略指数据从主服务器到从服务器复制的不同机制，主要涉及数据一致性和系统可用性之间的权衡。

* 全同步
* 半同步
* 异步
* GTID

=== 挑战2 解决方案
* 客户端访问处理：应用程序指定执行语句所要执行的数据源
* 中间件层（独立部署的代理层方案）：Mycat、Atlas、DBProxy

第二阶段：引入缓存机制

第三阶段：


https://cloud.tencent.com/developer/article/2396167[深入解密MySQL主从复制]